{{page-title "Mock login"}}

<div class="au-c-main-container" itemprop="mainContentOfPage">
  <div class="au-c-main-container__content au-c-main-container__content--scroll">
    <main id="content">
      <AuContentHeader @titlePartOne="Vlaanderen" @titlePartTwo="is lokaal bestuur">
      </AuContentHeader>

      <div class="au-o-region-large">
        <div class="au-o-layout">
          <AuHeading @skin="4" class="au-u-margin-bottom-small">Kies een bestuurseenheid om mee in te loggen.</AuHeading>
          <p class="au-u-margin-bottom">
            <input class="au-c-input au-c-input--block js-js-input-pattern-bound" placeholder="Aalst, Berchem,..." value={{this.gemeente}} oninput={{perform this.updateSearch value='target.value'}} aria-label="Kies een bestuurseenheid om mee in te loggen">
          </p>
          <MockLogin as |login|>
            {{#if this.queryStore.isRunning}}
              <AuLoader class="au-o-region">
                Accounts aan het laden
              </AuLoader>
            {{else}}
              {{#if login.errorMessage}}
                <AuAlert @icon="alert-triangle" @title={{login.errorMessage}} @skin="warning" />
              {{/if}}
              {{#if this.model.length}}
                <ul class="au-o-flow au-o-flow--small au-u-margin-bottom-small">
                  {{#each this.model as |account|}}
                    <li>
                      <AuButton
                        @skin="secondary"
                        class="mock-account-button au-u-padding-small au-u-1-1 au-u-text-left"
                        {{on
                          "click"
                          (fn login.login account.id account.user.group.id)
                        }}
                      >
                        {{account.user.voornaam}}
                        {{account.user.achternaam}}
                      </AuButton>
                    </li>
                  {{/each}}
                </ul>
              {{/if}}
              <AuDataTableNumberPagination
                @page={{this.page}}
                @size={{this.size}}
                @nbOfItems={{this.model.length}}
                @total={{this.model.meta.count}}
                @links={{this.model.meta.pagination}}
              />
            {{/if}}
          </MockLogin>
        </div>
      </div>
    </main>
  </div>
</div>

{{outlet}}